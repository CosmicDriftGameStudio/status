<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Space Conquest - System Status</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #050A14;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Courier New', monospace;
      color: #9D4EDD;
    }

    .terminal {
      background: #0A1628;
      border: 3px solid #9D4EDD;
      box-shadow:
        0 0 0 1px #050A14,
        0 0 0 4px #9D4EDD,
        0 0 40px rgba(157, 78, 221, 0.3),
        inset 0 0 80px rgba(5, 10, 20, 0.8);
      padding: 35px 45px;
      max-width: 520px;
      width: 90%;
    }

    .header {
      border-bottom: 2px solid #9D4EDD;
      padding-bottom: 18px;
      margin-bottom: 25px;
      text-align: center;
    }

    .header h1 {
      font-size: 16px;
      font-weight: normal;
      letter-spacing: 3px;
      color: #00D9FF;
      text-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid rgba(157, 78, 221, 0.2);
    }

    .status-row:last-child {
      border-bottom: none;
    }

    .label {
      color: #8B9DC3;
      font-size: 13px;
      letter-spacing: 1px;
    }

    .value {
      font-weight: bold;
      font-size: 13px;
      display: flex;
      align-items: center;
    }

    .value.ok { color: #00FF88; }
    .value.warn { color: #FFB800; }
    .value.error { color: #FF006E; }

    .indicator {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-right: 10px;
      animation: pulse 2s infinite;
    }

    .indicator.ok { background: #00FF88; box-shadow: 0 0 12px #00FF88; }
    .indicator.warn { background: #FFB800; box-shadow: 0 0 12px #FFB800; }
    .indicator.error { background: #FF006E; box-shadow: 0 0 12px #FF006E; }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    .footer {
      margin-top: 25px;
      padding-top: 18px;
      border-top: 2px solid #9D4EDD;
      text-align: center;
      font-size: 11px;
      color: #8B9DC3;
      letter-spacing: 1px;
    }

    .footer span {
      color: #00D9FF;
    }

    .loading {
      text-align: center;
      padding: 30px;
      color: #8B9DC3;
    }

    .blink {
      animation: blink 1s infinite;
      color: #00D9FF;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .big-status {
      text-align: center;
      padding: 15px 0 20px 0;
      font-size: 14px;
      letter-spacing: 2px;
      border-bottom: 1px solid rgba(157, 78, 221, 0.2);
      margin-bottom: 5px;
    }

    .big-status .indicator {
      width: 10px;
      height: 10px;
    }
  </style>
</head>
<body>
  <div class="terminal">
    <div class="header">
      <h1>SPACE CONQUEST // SYSTEM STATUS</h1>
    </div>

    <div id="status-content">
      <div class="loading">ESTABLISHING UPLINK<span class="blink">_</span></div>
    </div>

    <div class="footer">
      LAST SYNC: <span id="last-update">--:--:--</span>
    </div>
  </div>

  <script>
    const API_URL = 'https://api-sc.cosmicdriftgamestudio.com/health';

    async function fetchStatus() {
      const content = document.getElementById('status-content');
      const lastUpdate = document.getElementById('last-update');

      try {
        const start = Date.now();
        const response = await fetch(API_URL);
        const latency = Date.now() - start;
        const data = await response.json();

        const isOk = data.status === 'ok';
        const dbOk = data.services?.database?.ok;
        const redisOk = data.services?.redis?.ok;

        content.innerHTML = `
          <div class="big-status">
            <span class="value ${isOk ? 'ok' : 'error'}">
              <span class="indicator ${isOk ? 'ok' : 'error'}"></span>
              ${isOk ? 'ALL SYSTEMS OPERATIONAL' : 'SYSTEM DEGRADED'}
            </span>
          </div>
          <div class="status-row">
            <span class="label">NEXUS CORE</span>
            <span class="value ok">
              <span class="indicator ok"></span>ONLINE
            </span>
          </div>
          <div class="status-row">
            <span class="label">DATA VAULT</span>
            <span class="value ${dbOk ? 'ok' : 'error'}">
              <span class="indicator ${dbOk ? 'ok' : 'error'}"></span>
              ${dbOk ? 'LINKED' : 'OFFLINE'} ${data.services?.database?.latency ? `// ${data.services.database.latency}ms` : ''}
            </span>
          </div>
          <div class="status-row">
            <span class="label">CACHE GRID</span>
            <span class="value ${redisOk ? 'ok' : 'error'}">
              <span class="indicator ${redisOk ? 'ok' : 'error'}"></span>
              ${redisOk ? 'ACTIVE' : 'OFFLINE'} ${data.services?.redis?.latency ? `// ${data.services.redis.latency}ms` : ''}
            </span>
          </div>
          <div class="status-row">
            <span class="label">SIGNAL LATENCY</span>
            <span class="value ${latency < 500 ? 'ok' : latency < 1000 ? 'warn' : 'error'}">${latency}ms</span>
          </div>
          <div class="status-row">
            <span class="label">FIRMWARE</span>
            <span class="value ok">${data.version || 'N/A'}</span>
          </div>
          ${data.dbSize ? `
          <div class="status-row">
            <span class="label">DATA NODES</span>
            <span class="value ok">${data.dbSize.formatted}</span>
          </div>
          ` : ''}
        `;

        lastUpdate.textContent = new Date().toLocaleTimeString();

      } catch (error) {
        content.innerHTML = `
          <div class="big-status">
            <span class="value error">
              <span class="indicator error"></span>
              UPLINK FAILED
            </span>
          </div>
          <div class="status-row">
            <span class="label">ERROR CODE</span>
            <span class="value error">${error.message}</span>
          </div>
        `;
        lastUpdate.textContent = new Date().toLocaleTimeString();
      }
    }

    fetchStatus();
    setInterval(fetchStatus, 30000);
  </script>
</body>
</html>
